FROM alpine:latest

# Install mysql client and netcat for connection testing
RUN apk add --no-cache mysql-client netcat-openbsd

# Copy migration script
COPY run-migrations.sh /run-migrations.sh
RUN chmod +x /run-migrations.sh

# Copy migration files
COPY migrations /migrations

ENTRYPOINT ["/run-migrations.sh"]